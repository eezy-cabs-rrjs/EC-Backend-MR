<div class="page-container">
  <div class="login-container">
    <div class="header">
      <button class="home-button" (click)="navigateHome()">Home</button>
      <div class="role-toggle">
        <select id="role" [(ngModel)]="loginData.role" class="form-select"
          [ngClass]="{'is-invalid': submitted && !loginData.role}">
          <option value="user">User</option>
          <option value="driver">Driver</option>
          <option value="admin">Admin</option>
        </select>
      </div>
    </div>

    <h2 class="text-center mb-4">EEZY CABS Login</h2>

    <form (ngSubmit)="onLogin()" #loginForm="ngForm" class="login-form" novalidate>
      <div class="form-group mb-3">
        <label for="email" class="form-label">Email:</label>
        <input type="email" id="email" autocomplete="off" name="email" required email [(ngModel)]="loginData.email" #email="ngModel"
          class="form-control"
          [ngClass]="{'is-invalid': (email.invalid && email.touched) || (submitted && email.invalid)}"
          autocomplete="email" />
        <div class="invalid-feedback" *ngIf="(email.invalid && email.touched) || (submitted && email.invalid)">
          <span *ngIf="email.errors?.['required']">Email is required</span>
          <span *ngIf="email.errors?.['email']">Please enter a valid email</span>
        </div>
      </div>

      <div class="form-group mb-3">
        <label for="password" class="form-label">Password:</label>
        <input type="password" autocomplete="off" id="password" name="password" required minlength="6" [(ngModel)]="loginData.password"
          #password="ngModel" class="form-control"
          [ngClass]="{'is-invalid': (password.invalid && password.touched) || (submitted && password.invalid)}"
          autocomplete="current-password" />
        <div class="invalid-feedback" *ngIf="(password.invalid && password.touched) || (submitted && password.invalid)">
          <span *ngIf="password.errors?.['required']">Password is required</span>
          <span *ngIf="password.errors?.['minlength']">Password must be at least 6 characters</span>
        </div>
      </div>

      <button type="submit" class="btn btn-primary w-100 mb-3" [disabled]="isLoading">
        {{ isLoading ? 'Logging in...' : 'Login' }}
      </button>

      <div class="text-center">
        <p>Don't have an account? <a [routerLink]="['/auth/signup']" class="register-link">Register here</a></p>
      </div>
    </form>
  </div>
</div>